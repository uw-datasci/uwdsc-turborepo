# Winter 2026 Updates

This semester continues to build upon the foundation established in Fall 2025, with new features and improvements across the platform.

## üéØ Main Website (apps/web)

### Account Security (PR #126)

**Password Reset Flow**
- Users can now reset forgotten passwords through a secure email-based flow
- "Forgot Password" link added to login page for easy access
- Password reset emails sent with time-limited secure links
- Dedicated reset password page with new password confirmation
- Email verification required before password can be reset

## üèÜ CXC App (apps/cxc)

### NFC Check-In System (PR #117)

**NFC Badge Integration**
- Users can view their unique NFC ID on the dashboard for event check-ins
- NFC ID displayed in a scannable QR code format on dashboard card
- Copy check-in URL to clipboard for easy badge programming
- Automatic NFC ID generation when users access the dashboard

**NFC Read & Write Pages**
- Dedicated `/nfc-read` page for reading NFC tags using Web NFC API
- Dedicated `/nfc-write` page for writing check-in URLs to NFC tags
- Browser-based NFC tag reading and writing (no additional hardware required)
- Real-time feedback when NFC tags are detected and read/written

**Admin Event Check-In**
- Admins can check in attendees by scanning NFC badges or QR codes
- Quick check-in workflow from events page with NFC/QR scanner
- Check-in confirmation with success/error messages
- Automatic event caching - remembers last selected event for faster check-ins
- Support for both NFC tap and QR code scan methods

**Event Check-In Page (`/admin/checkin/[nfc_id]`)**
- Dedicated check-in page accessible via NFC badge URL
- Select event and check in user with single tap
- Profile lookup by NFC ID with email display
- Loading states with email polling for newly created profiles
- Cached event selection for streamlined multi-attendee check-ins

### Event Management System (PR #117)

**Events Dashboard (`/admin/events`)**
- Admins can view all events in a comprehensive list
- Event cards display name, location, date/time, and registration requirements
- Quick access to edit events or check in attendees
- NFC and QR code scanner integration for on-site check-ins
- Create new events directly from the dashboard

**Event Creation (`/admin/events/add`)**
- Admins can create new events with complete details
- Form fields include:
  - Event name and description
  - Location and date/time selection
  - Start and end times with buffer periods
  - Registration and payment requirement toggles
- Input validation ensures all required fields are provided
- Success confirmation redirects to events list

**Event Editing (`/admin/events/edit`)**
- Admins can update existing event details
- Pre-populated form with current event data
- Same comprehensive editing options as event creation
- Update confirmation with navigation back to events list

### Superadmin Role Management (PR #117)

**Role Assignment Interface (`/admin/assign`)**
- Superadmins can search for users by email
- Assign admin roles to registered users
- View current user roles before assignment
- Confirmation prompt before role changes
- Real-time role updates in the interface
- Cannot reassign superadmin or admin roles (shows current role badge)

**Superadmin Navigation Access**
- New "Superadmin" dropdown in navbar (visible only to superadmins)
- Quick access to role assignment page
- Separate from regular admin navigation menu
- Role-based visibility ensures proper access control

### Account Security (PR #126)

**Password Reset Flow**
- Users can now reset forgotten passwords through a secure email-based flow
- "Forgot Password" link added to login page for easy access
- Password reset emails sent with time-limited secure links
- Dedicated reset password page with new password confirmation
- Email verification required before password can be reset

### Admin Application Management (PR #118)

**Applications Dashboard (`/admin/applications`)**
- Admins can view all submitted applications in a sortable, filterable table
- Table displays applicant name, email, university, gender, number of reviews, submission date, and review count
- Filter applications by email with real-time search
- Sortable columns for efficient application browsing
- Pagination support with customizable rows per page (10, 20, 30, 40, 50)
- Click any row to view complete application details in a modal
- Real-time application count display

**Application Details Modal**
- View comprehensive application information in organized sections:
  - Basic Information: name, email, phone, Discord, age, gender, ethnicity, country, t-shirt size, dietary restrictions
  - Education & Experience: university, program, year of study, hackathon experience
  - Social Links: GitHub, LinkedIn, website, portfolio
  - Application Questions: technical project description and creative haiku
  - Team Information: team members with names and emails
  - Resume viewer with secure access
  - MLH authorization checkboxes status
- Loading skeleton during data fetch for improved UX
- Responsive design with mobile-optimized layout

**Enhanced Review System (`/admin/review`)**
- Redesigned review interface with improved layout and components
- Reusable review components for consistent scoring UI
- Better error handling and loading states
- "Get New Application" button to fetch next application without page reload

**Admin Navigation**
- New "Admin" dropdown menu in navbar (visible only to admin users)
- Quick access to Applications Dashboard and Review pages
- Mobile menu support with admin pages section
- Description text for each admin page

### Content & Branding Updates
- **Brand Consistency (PR #114)**: Standardized "CXC" branding across all components, replacing inconsistent "CxC" usage for improved professional appearance

### Application Flow Enhancements

**Complete Application & Reviewer Flow (PR #100)**

#### Application Form Improvements

**Team Selection Feature**
- Added team member search and selection functionality
- Users can add up to 3 team members by searching for registered users
- Team members displayed with names and emails in review section
- Real-time search with name/email filtering
- New `/api/users/emails` endpoint provides user list for team selection

**Form State Persistence**
- Application progress now persists across page refreshes using localStorage
- Desktop step and mobile page positions saved automatically
- Individual form fields auto-save to localStorage as users type
- Form data restored when users return to the application
- Prevents data loss during browser crashes or accidental navigation

**Resume Upload & Management**
- Resume uploads now replace existing resumes automatically
- Added GET endpoint to retrieve user's current resume with signed URLs
- Resume files stored in private bucket with secure access
- Resume preview available in application review section
- File validation (max 10 MB, PDF/DOC/DOCX formats)
- Immediate upload on file selection with validation feedback

**Application Submission Protection**
- Users cannot edit applications after submission
- Submitted applications redirect to "Submitted" page automatically
- LocalStorage cleared upon successful submission

#### Admin Review System

**Review Assignment Logic**
- New `/api/applications/random` endpoint returns applications with least reviews
- Prevents reviewers from seeing applications they've already reviewed
- Ties broken lexicographically by application ID for fairness
- Admin-only access with role verification middleware

**Review Interface (`/review` page)**
- Dedicated review page for admin users with score submission
- Displays complete application data including:
  - Contact information and personal details
  - Education and hackathon experience
  - Social links (GitHub, LinkedIn, website)
  - Application questions (technical project, haiku)
  - Team members with names
  - Resume viewer with signed URL access
- Score applications on 3 categories (1-10 scale):
  - Basic information
  - Question 1 (technical project)
  - Question 2 (haiku)
- Validation ensures all scores provided before submission
- Success confirmation with option to review another application

**Review Tracking**
- New `reviews` table tracks all review submissions
- Prevents duplicate reviews from same reviewer
- Tracks total review count per reviewer
- Stores individual scores for each review category

#### Application Form Structure

**Reorganized Form Steps**
- Split "Teams & MLH" into separate steps:
  - Step 3: Team Members (optional)
  - Step 4: MLH Checkboxes (required)
  - Step 5: Review & Submit
- Updated step validation logic for new structure
- Desktop and mobile views synchronized

### Backend Architecture Updates

**Event Management Services (PR #117)**
- `EventService`: Manages event lifecycle and attendance
  - `getAllEvents()`: Retrieve all events sorted by date
  - `getEventById()`: Fetch specific event details
  - `createEvent()`: Create new events with validation
  - `updateEvent()`: Update existing event information
  - `deleteEvent()`: Remove events from the system
  - `checkInUser()`: Record event attendance for users
  - `getEventAttendance()`: Retrieve check-in records for events

**Profile Management Services (PR #117)**
- `ProfileService` enhancements:
  - `getProfileByNfcId()`: Lookup profiles using NFC ID
  - `updateNfcId()`: Assign or update NFC ID for users
  - Role validation for admin and superadmin access

**New Services**
- `AdminApplicationService`: Manages admin application access
  - `getAllApplicationSummaries()`: Returns all submitted applications with summary data
  - `getApplicationById()`: Retrieves full application details by ID
- `AdminReviewService`: Manages review assignment and submission
  - `getNextApplicationForReview()`: Returns least-reviewed application
  - `submitReview()`: Validates and saves review scores
- `ApplicationService.getAllUserEmails()`: Fetches user list for team selection

**New Repositories**
- `AdminApplicationRepository`: Database operations for application management
  - `getAllApplicationSummaries()`: Query for application table with review counts
  - `getApplicationById()`: Fetch complete application details with team member info
  - Includes user name extraction from auth metadata
- `AdminReviewRepository`: Database operations for reviews
  - `getApplicationWithLeastReviews()`: Query for review assignment
  - `getUserEmail()`: Fetch user email by profile ID
  - `getTeamMembersByEmails()`: Get team member details
  - `hasReviewerReviewedApplication()`: Check duplicate reviews
  - `createReview()`: Insert review record
  - `getReviewCountByReviewer()`: Track reviewer progress

**Enhanced File Services**
- `FileRepository.createSignedUrl()`: Generate secure signed URLs for private files
- `FileService.createSignedUrl()`: Service wrapper for signed URL generation
- `ResumeService` enhancements:
  - `uploadResume()`: Now automatically replaces existing resumes
  - `getUserResume()`: Retrieve user's current resume
  - `getSignedResumeUrl()`: Get secure, time-limited resume access with ownership verification

### API Enhancements

**Event Management Endpoints (PR #117)**
- `GET /api/admin/events` - List all events (admin only)
- `POST /api/admin/events` - Create new event (admin only)
- `GET /api/admin/events/[id]` - Get specific event details (admin only)
- `PUT /api/admin/events/[id]` - Update event information (admin only)
- `DELETE /api/admin/events/[id]` - Delete event (admin only)

**Check-In & NFC Endpoints (PR #117)**
- `POST /api/admin/checkin` - Check in user for event using NFC ID (admin only)
- `GET /api/admin/nfc?nfc_id=[id]` - Get profile by NFC ID (admin only)

**User Management Endpoints (PR #117)**
- `GET /api/admin/users/search?email=[email]` - Search users by email (superadmin only)
- `POST /api/admin/users/assign` - Assign admin role to user (superadmin only)

**New Endpoints**
- `GET /api/admin/applications` - Get all submitted applications (admin only)
- `GET /api/admin/applications/[id]` - Get full application details by ID (admin only)
- `GET /api/applications/random` - Get next application for review (admin only)
- `GET /api/applications/resumes` - Retrieve user's resume with signed URL
- `POST /api/review/submit` - Submit review scores for an application
- `GET /api/users/emails` - Get all user emails for team member selection

**Enhanced Endpoints**
- `POST /api/applications/resumes` - Now replaces existing resumes
- `PATCH /api/applications/route` - Improved error messages with detailed error context

### Middleware & Security

**Admin Route Protection**
- `/admin/**` routes now require admin role (updated from `/review`)
- `withProtected` middleware enhanced with role-based access control
- Non-admin users redirected to home page
- Profile service integration for role verification

**Superadmin Route Protection (PR #117)**
- `/admin/assign` route requires superadmin role specifically
- Three-tier access control: user, admin, and superadmin
- Middleware checks profile role before granting access
- Automatic redirects for insufficient permissions

**Auth Route Protection**
- Added `/start` to protected authentication routes
- Authenticated users redirected away from auth pages

### Client-Side API Functions

**New API Functions**
- `getAllApplications()`: Fetch all submitted applications for admin table
- `getApplicationDetails()`: Retrieve full application details by ID
- `getRandomApplication()`: Fetch random application for review
- `submitReview()`: Submit review scores with validation
- `getUserEmails()`: Get user list for team selection
- `getResume()`: Retrieve current user's resume

**Enhanced Functions**
- `uploadResume()`: Improved error handling and response types

## üé® Design System (packages/ui)

### New Components (PR #117)

**QR Code Scanner Component**
- Browser-based QR code scanner for admin check-ins
- Real-time camera feed with scanning overlay
- Automatic detection and parsing of check-in URLs
- Fallback support for browsers without camera access
- Used in event check-in workflows

### New Components

**Table Component (shadcn/ui)**
- Added complete table component set for data display
- Includes Table, TableHeader, TableBody, TableFooter, TableRow, TableHead, TableCell, TableCaption
- Responsive overflow handling with horizontal scrolling
- Hover states and selected row highlighting
- Used for admin applications dashboard

### Component Enhancements

**Dialog Component**
- Enhanced close button with cursor pointer for better UX
- Code formatting cleanup (trailing commas)

**GlassSurface Component**
- Fixed React hook dependency warnings with proper useCallback memoization
- Improved performance with optimized re-renders

**Form Components**
- Enhanced FileUploadField with callbacks for file selection and name changes
- Added `existingFileName` prop to display previously uploaded files
- Support for `onFileChange` and `onFileSelect` callbacks
- Fixed SelectField to handle undefined values correctly

## üîß Infrastructure

### Authentication Services (PR #126)

**Password Reset Backend**
- `AuthService.forgotPassword()`: Sends password reset email with secure redirect link
- `AuthService.resetPassword()`: Validates and updates user password
- `AuthRepository.resetPasswordForEmail()`: Supabase integration for password reset emails
- `AuthRepository.updateUserPassword()`: Secure password update functionality
- New API endpoints:
  - `POST /api/auth/forgot-password` - Request password reset email
  - `POST /api/auth/reset-password` - Complete password reset with new password
- Client-side API functions for password reset flow integration

### Shared Utilities

**Data Transformers**
- Added `splitCommaSeparatedString()` utility to core package for consistent string parsing
- Shared across repositories for ethnicity and experience fields

### Database Schema Updates

**Event Tables (PR #117)**
- `events` table for storing hackathon events:
  - `id` (primary key)
  - `name`, `description`, `location`
  - `start_time`, `buffered_start_time`, `end_time`, `buffered_end_time`
  - `registration_required`, `payment_required`
  - `image_id` (optional event image)
  - Timestamps for created/updated tracking

- `event_attendance` table for tracking check-ins:
  - `id` (primary key)
  - `event_id` (foreign key to events)
  - `profile_id` (foreign key to profiles)
  - `checked_in` (boolean status)
  - `created_at` (check-in timestamp)

**Profile Updates (PR #117)**
- `nfc_id` field added to profiles table for NFC badge integration
- Unique constraint on `nfc_id` to prevent duplicates
- Used for quick profile lookup during event check-ins

**New Tables**
- `reviews` table for storing application reviews:
  - `id` (UUID primary key)
  - `application_id` (foreign key to applications)
  - `reviewer_id` (foreign key to profiles)
  - `basic_info_score` (integer 1-10)
  - `q1_score` (integer 1-10)
  - `q2_score` (integer 1-10)
  - `reviewed_at` (timestamp)

**Application Updates**
- `team_members` field stores comma-separated team member emails
- Enhanced application queries to include team member details with display names

### Storage Updates

**Resume Storage**
- Private bucket configuration for secure resume storage
- Signed URL generation with configurable expiration (default 1 hour)
- Automatic cleanup of old resumes when new ones uploaded

## üöÄ DevOps & CI/CD

---

_Features documented from merged PRs tagged with `W26`. This page is automatically updated when PRs are merged._
